<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOLalchemists - Verification Admin</title>
    <link rel="icon" type="image/png" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE2IDJMMjAgNkwxOCA4TDIwIDEwTDE4IDEyTDIwIDE0TDE4IDE2TDIwIDE4TDE4IDIwTDIwIDIyTDE4IDI0TDIwIDI2TDE4IDI4TDIwIDMwSDEyTDE0IDI4SDEyTDE0IDI2SDEyTDE0IDI0SDEyTDE0IDIySDEyTDE0IDIwSDEyTDE0IDE4SDEyTDE0IDE2SDEyTDE0IDE0SDEyTDE0IDEySDEyTDE0IDEwSDEyTDE0IDhMMTYgNloiIGZpbGw9IiMwMGZmNDEiLz4KPHBhdGggZD0iTTE0IDI4SDE4VjMwSDE0VjI4WiIgZmlsbD0iIzAwZmY0MSIvPgo8cGF0aCBkPSJNMTYgMjZIMThWMjZIMTZaIiBmaWxsPSIjMDBmZjQxIi8+Cjwvc3ZnPgo=">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="social-rewards.css">
    <style>
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0a1a 25%, #0a1a0a 50%, #1a1a0a 75%, #0a0a1a 100%);
            min-height: 100vh;
            font-family: 'Orbitron', monospace;
            color: #00ff41;
        }
        
        .admin-header {
            background: rgba(0, 0, 0, 0.9);
            border-bottom: 2px solid #00ff41;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        
        .admin-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.5rem;
            text-align: center;
            color: #00ff41;
            text-transform: uppercase;
        }
        
        .verification-card {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #333;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        .verification-card:hover {
            border-color: #00ff41;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
        }
        
        .verification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
        }
        
        .verification-type {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.8rem;
            color: #00ff41;
            text-transform: uppercase;
        }
        
        .verification-time {
            color: #888;
            font-size: 0.8rem;
        }
        
        .verification-proof {
            margin: 15px 0;
        }
        
        .proof-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 8px;
            border: 1px solid #333;
        }
        
        .proof-link {
            color: #00ff41;
            text-decoration: none;
            word-break: break-all;
        }
        
        .proof-link:hover {
            color: #00cc33;
            text-decoration: underline;
        }
        
        .verification-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 15px;
        }
        
        .approve-btn, .reject-btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            border: none;
        }
        
        .approve-btn {
            background: #00ff41;
            color: #000;
        }
        
        .approve-btn:hover {
            background: #00cc33;
            transform: translateY(-2px);
        }
        
        .reject-btn {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #ff4444;
            color: #ff4444;
        }
        
        .reject-btn:hover {
            background: #ff4444;
            color: #fff;
        }
        
        .stats-container {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ff41;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            border: 1px solid #333;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #00ff41;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #888;
            font-size: 0.9rem;
            text-transform: uppercase;
        }
        
        .no-verifications {
            text-align: center;
            padding: 50px;
            color: #888;
            font-size: 1.2rem;
        }
        
        .export-btn {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ff41;
            color: #00ff41;
            padding: 12px 25px;
            border-radius: 8px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.7rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            margin-bottom: 20px;
        }
        
        .export-btn:hover {
            background: #00ff41;
            color: #000;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="admin-header">
        <div class="container">
            <h1 class="admin-title">
                <i class="fas fa-shield-alt"></i> VERIFICATION ADMIN PANEL
            </h1>
            <p class="text-center text-muted">Manage social media engagement verifications</p>
        </div>
    </div>

    <div class="container">
        <!-- Statistics -->
        <div class="stats-container">
            <h3 class="text-center mb-4" style="color: #00ff41; font-family: 'Press Start 2P', cursive; font-size: 1rem;">
                <i class="fas fa-chart-bar"></i> VERIFICATION STATS
            </h3>
            <div class="stats-grid" id="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" id="pending-count">0</div>
                    <div class="stat-label">Pending</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="approved-count">0</div>
                    <div class="stat-label">Approved</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="rejected-count">0</div>
                    <div class="stat-label">Rejected</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="total-users">0</div>
                    <div class="stat-label">Total Users</div>
                </div>
            </div>
        </div>

        <!-- Export Button -->
        <div class="text-center">
            <button class="export-btn" onclick="exportData()">
                <i class="fas fa-download"></i> EXPORT DATA
            </button>
        </div>

        <!-- Verification Queue -->
        <div id="verification-queue">
            <div class="no-verifications">
                <i class="fas fa-inbox fa-3x mb-3"></i>
                <p>No pending verifications</p>
            </div>
        </div>
    </div>

    <script>
        // Load verification data from localStorage
        function loadVerificationData() {
            const progressData = localStorage.getItem('solalchemists_progress');
            const userProgress = progressData ? JSON.parse(progressData) : {};
            
            // Get pending verifications
            const pendingVerifications = [];
            Object.keys(userProgress).forEach(userId => {
                const user = userProgress[userId];
                if (user.pending) {
                    Object.keys(user.pending).forEach(type => {
                        pendingVerifications.push({
                            userId,
                            type,
                            ...user.pending[type]
                        });
                    });
                }
            });
            
            return { userProgress, pendingVerifications };
        }

        // Update statistics
        function updateStats() {
            const { userProgress, pendingVerifications } = loadVerificationData();
            
            const pendingCount = pendingVerifications.length;
            const approvedCount = Object.values(userProgress).reduce((total, user) => {
                return total + (user.verified ? Object.keys(user.verified).length : 0);
            }, 0);
            const totalUsers = Object.keys(userProgress).length;
            
            document.getElementById('pending-count').textContent = pendingCount;
            document.getElementById('approved-count').textContent = approvedCount;
            document.getElementById('rejected-count').textContent = '0'; // Not implemented yet
            document.getElementById('total-users').textContent = totalUsers;
        }

        // Display verification queue
        function displayVerificationQueue() {
            const { pendingVerifications } = loadVerificationData();
            const queueContainer = document.getElementById('verification-queue');
            
            if (pendingVerifications.length === 0) {
                queueContainer.innerHTML = `
                    <div class="no-verifications">
                        <i class="fas fa-inbox fa-3x mb-3"></i>
                        <p>No pending verifications</p>
                    </div>
                `;
                return;
            }
            
            queueContainer.innerHTML = pendingVerifications.map(verification => {
                const proofDisplay = verification.proofType === 'screenshot' 
                    ? `<img src="${verification.proof}" alt="Screenshot" class="proof-image">`
                    : `<a href="${verification.proof}" target="_blank" class="proof-link">${verification.proof}</a>`;
                
                const typeNames = {
                    follow: 'Follow',
                    retweet: 'Retweet',
                    like: 'Like',
                    comment: 'Comment',
                    profilePic: 'Profile Picture',
                    bio: 'Bio Mention'
                };
                
                return `
                    <div class="verification-card" data-user-id="${verification.userId}" data-type="${verification.type}">
                        <div class="verification-header">
                            <span class="verification-type">
                                <i class="fas fa-${getTypeIcon(verification.type)}"></i>
                                ${typeNames[verification.type]}
                            </span>
                            <span class="verification-time">
                                ${new Date(verification.timestamp).toLocaleString()}
                            </span>
                        </div>
                        
                        <div class="verification-proof">
                            <strong>Proof:</strong><br>
                            ${proofDisplay}
                        </div>
                        
                        <div class="verification-actions">
                            <button class="approve-btn" onclick="approveVerification('${verification.userId}', '${verification.type}')">
                                <i class="fas fa-check"></i> APPROVE
                            </button>
                            <button class="reject-btn" onclick="rejectVerification('${verification.userId}', '${verification.type}')">
                                <i class="fas fa-times"></i> REJECT
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Get icon for verification type
        function getTypeIcon(type) {
            const icons = {
                follow: 'user-plus',
                retweet: 'retweet',
                like: 'heart',
                comment: 'comment',
                profilePic: 'image',
                bio: 'file-text'
            };
            return icons[type] || 'question';
        }

        // Approve verification
        function approveVerification(userId, type) {
            const { userProgress } = loadVerificationData();
            
            if (!userProgress[userId]) {
                alert('User not found!');
                return;
            }
            
            // Remove from pending
            delete userProgress[userId].pending[type];
            
            // Add to verified
            if (!userProgress[userId].verified) {
                userProgress[userId].verified = {};
            }
            userProgress[userId].verified[type] = true;
            
            // Award XP
            const rewards = {
                follow: 100,
                retweet: 50,
                like: 10,
                comment: 25,
                profilePic: 200,
                bio: 150
            };
            
            const xpGained = rewards[type] || 0;
            userProgress[userId].totalXP = (userProgress[userId].totalXP || 0) + xpGained;
            
            // Save updated data
            localStorage.setItem('solalchemists_progress', JSON.stringify(userProgress));
            
            // Update display
            updateStats();
            displayVerificationQueue();
            
            // Show success message
            showSuccessMessage(`Approved ${type} for user ${userId}. Awarded ${xpGained} XP.`);
        }

        // Reject verification
        function rejectVerification(userId, type) {
            const { userProgress } = loadVerificationData();
            
            if (!userProgress[userId]) {
                alert('User not found!');
                return;
            }
            
            // Remove from pending
            delete userProgress[userId].pending[type];
            
            // Save updated data
            localStorage.setItem('solalchemists_progress', JSON.stringify(userProgress));
            
            // Update display
            updateStats();
            displayVerificationQueue();
            
            showSuccessMessage(`Rejected ${type} for user ${userId}.`);
        }

        // Export data
        function exportData() {
            const { userProgress, pendingVerifications } = loadVerificationData();
            
            const exportData = {
                timestamp: new Date().toISOString(),
                userProgress,
                pendingVerifications,
                stats: {
                    totalUsers: Object.keys(userProgress).length,
                    pendingCount: pendingVerifications.length,
                    approvedCount: Object.values(userProgress).reduce((total, user) => {
                        return total + (user.verified ? Object.keys(user.verified).length : 0);
                    }, 0)
                }
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `solalchemists-verifications-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
        }

        // Show success message
        function showSuccessMessage(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(0, 0, 0, 0.9);
                border: 2px solid #00ff41;
                color: #00ff41;
                padding: 15px 20px;
                border-radius: 8px;
                z-index: 10000;
                font-family: 'Press Start 2P', cursive;
                font-size: 0.7rem;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 3000);
        }

        // Initialize admin panel
        function initAdminPanel() {
            updateStats();
            displayVerificationQueue();
        }

        // Auto-refresh every 30 seconds
        setInterval(() => {
            updateStats();
            displayVerificationQueue();
        }, 30000);

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initAdminPanel);
    </script>
</body>
</html>
